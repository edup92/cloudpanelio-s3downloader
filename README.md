## download_backups.sh

This script automates the retrieval of backup archives (`backup.tar`) from an AWS S3 bucket generated by cloudpanel.io hosting panel

---

### Prerequisites

* **AWS CLI** installed and configured with valid credentials and appropriate permissions to access the target S3 bucket.
* **Bash shell** (version 4+ recommended).

### Script Workflow

1. **Validate Arguments**

   * The script checks that a repository name is provided. If not, it prints usage instructions and exits.

2. **Identify Latest Backup Date**

   * Lists all subfolders under `backups/`, extracts the date-formatted names, sorts them, and selects the most recent (`YYYY-MM-DD`).

3. **Construct Base S3 Path**

   * Combines the bucket name, latest date folder, provided repository name, and the `home` directory.

4. **Iterate Through Clients**

   * Lists each subfolder (client) under the `home` directory.
   * For each client folder, it downloads the `backup.tar` file and renames it to `<client-name>.tar` in the local directory.

5. **Completion**

   * After processing all client backups, the script outputs a confirmation message.

### How to run

 ```bash
 git clone https://github.com/edup92/cloudpanelio-s3downloader.git ; chmod +x cloudpanelio-s3downloader/download_backups.sh ; ./cloudpanelio-s3downloader/download_backups.sh <bucket-name>
 ```
